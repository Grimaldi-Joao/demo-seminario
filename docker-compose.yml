version: '3.8'

services:
  servico-catalogo:
    build: ./servico-catalogo
    environment:
      - SERVER_PORT=8081 # Porta interna do container

  servico-recomendacoes:
    build: ./servico-recomendacoes
    environment:
      - SERVER_PORT=8082 # Porta interna do container

  servico-frontend:
    build: ./servico-frontend
    ports:
      - "8080:8080" # Exp√µe a porta 8080 para o seu computador
    environment:
      - SERVER_PORT=8080
      # Service Discovery: Diz ao frontend onde encontrar os backends
      - CATALOGO_URL=http://servico-catalogo:8081
      - RECOMENDACOES_URL=http://servico-recomendacoes:8082
    depends_on:
      - servico-catalogo
      - servico-recomendacoes